<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>prac</title>
</head>
<body>


<h1>20</h1> <h2>글자까지 입력 가능</h2>

<textarea id="text" rows="5" cols="50" name="text"></textarea>

<input type="button" value="새로 입력">

<script>
let textarea = document.querySelector("textarea");
let button = document.querySelector("input[type=button]");
let h1_count = document.querySelector("h1");
let h2_msg = document.querySelector("h2");

let total_len = parseInt(h1_count.innerHTML);

let noticing = function(){
let current_len = textarea.value.length;
let remain_len = total_len - current_len;
h1_count.innerHTML = remain_len;
h2_msg.innerHTML = "글자 남았습니다.";
h2_msg.style.color = "green";

if(remain_len==0){
textarea.setAttribute("readonly", "readonly");
h2_msg.innerHTML = "더이상 입력 불가능합니다."
h2_msg.style.color = "red";

}
};




textarea.addEventListener("keypress", noticing, false);


button.addEventListener("click",
 function(){
 textarea.value = "";
 textarea.removeAttribute("readonly");
 h2_msg.innerHTML = "다시 작성해봅시다.";
 h1_count.innerHTML = "20";
 textarea.focus();

 }


 , false);





// keyevent 처리 키 입력시 마다
// =>  xx 글자 남았습니다.  로 출력되게
// => 0글자 남았을때 => 더이상 입력 안되게 처리 (readonly) 속성 붙이면 됨
// setAttribute (JS 속성추가 )
// 새로입력버튼 클릭시
// textarea 입력내용 삭제 / readonly 속성 삭제 (removeAttribute) 사용


</script>





</body>
</html>